## User Story

- 登入/註冊
- 所有使用者:User
    - 必須使用FB註冊與登入（最後階段再做）
    - 必須登入才可使用
    - 第一次登入
        - 導向帳戶設定頁面
        - 必須設定名稱，name: :string
        - 必須設定組別，team: :string
    - 權限分為一般使用者及管理者，is_admin: :boolean
    - 使用者可以設定名稱、組別
- 管理者
    - 擁有一般使用者所有功能
    - 管理者可以管理使用者權限，is_admin: :boolean
    - 可以編輯店家:Store
        - 店家屬性：店名 title: :string、電話 phone: :string、地址 address: :string
            - 是否為飲料店 is_drink: :boolean
        - 可以建立店家
        - 可以修改店家
        - 可以刪除店家
        - 刪除店家時，該店家的商品種類清單一併刪除
        - 可以編輯店家的商品種類:Product
            - 商品種類屬性：名稱 title: :string、價錢 price: :integer、store_id: :integer
            - 可以增加商品種類
            - 可以修改商品種類
            - 可以刪除商品種類
- 團購 groupon
    - 團購屬性：截止時間 deadline: :datetime、token: :string、is_secret: :boolean、store_id
    - 使用者可以建立團購
    - 在店家列表建立團購
    - 一個團只對應一個店家
    - 一個團可以有一個團長，開團者立即成為團長
    - 建立團購時可以設定截止時間、是否秘密
    - 團長可以修改截止時間、是否秘密
    - 有一個公開列表列出所有公開的團購
    - 使用者登入後進到團購公開列表
    - 但秘密團不出現在團購公開列表
    - 購買頁面
        - 有團購商店的產品列表
            - 名稱、單價
            - [ ] 數量
            - 訂購按鈕
        - 按下訂購按鈕跳出確認視窗
        - 確認後產生訂單並跳至該訂單頁面
            - 若為飲料店會出現糖、冰選項
    - 訂單
        - 一個團購裡面有許多訂單
        - 一位使用者在一個團購裡面只能建立一張訂單
        - 訂單屬性：是否付款 is_paid: :boolean、訂單總價 price: :integer
        - 可訂購多樣商品 Order_item
            -  groupon_id、order_id、product_id、quantity: :integer
            -  sugar: :string、ice: :string
        - 每樣商品都有數量
        - 可以修改訂單
            - 某項商品數量
            - 若為飲料店可以修改糖、冰
            - 取消某項商品
            - 超過截止時間無法建立或修改訂單
            - 已付款的狀態無法修改訂單
    - 所有人可以看到團購訂單概觀
        - 有此團購的訂單列表
        - 訂單依據組別分組，user.team
        - 每位成員的訂單會列出
            - 名稱、購買項目（數量）、訂單價格、是否付款
            - 有一個按鈕可以設定「付款」或「退款」
                - 只有團長才有
            - 若訂單價格等於 0 就不要顯示在 groupon overview 裡面
        - 有分組總價
        - 有分組付款按鈕，方便整組一起付錢
            - 只有團長才有
        - 當組內有任何人已付款，此按鈕消失
        - 有團購商品數量總計，譬如雞排飯（10）、雞腿飯（17）
        - 有團購商品總價
        - 有店家電話
        - 可以取消團購
            - 但必須所有訂單皆未付款
            - 取消團購後所有訂單會被刪除
- 一般使用者
    - 可以看到所有公開的團購列表
    - 可以看到自己所有訂單列表
    - 可以看到店家列表
    - 店家點進去可以看到商品列表
    - 每個店家旁邊有一個開團按鈕，按下去即可開團
